!function(){var e=$("#contact-form"),u=$("#submit-form"),s=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i,i={is_submitted:!1,fields:[{id:"name",is_valid:!1,error:LANG__NAME_REQUIRED,input:$("#name"),parent:$("#name").closest(".form-group"),help_block:$("#name").siblings(".help-block").first()},{id:"email",is_valid:!1,error:JS_EMAIL_VALIDATION_ERROR,input:$("#email"),parent:$("#email").closest(".form-group"),help_block:$("#email").siblings(".help-block").first()},{id:"phone",is_valid:!1,error:LANG__PHONE_REQUIRED,input:$("#phone"),parent:$("#phone").closest(".form-group"),help_block:$("#phone").siblings(".help-block").first()},{id:"subject",is_valid:!1,error:LANG__SUBJECT_REQUIRED,input:$("#subject"),parent:$("#subject").closest(".form-group"),help_block:$("#subject").siblings(".help-block").first()},{id:"message",is_valid:!1,error:LANG__MESSAGE_REQUIRED,input:$("#message"),parent:$("#message").closest(".form-group"),help_block:$("#message").siblings(".help-block").first()}]};function t(e){e.is_valid?(e.input.removeClass("error"),e.parent.removeClass("has-error"),e.help_block.removeClass("form-error").html("")):(e.input.addClass("error"),e.parent.addClass("has-error"),e.help_block.addClass("form-error").html(e.error))}function r(e,u){e.is_valid=!1,e.error=u,i.is_submitted&&t(e)}function F(e){e.is_valid=!0,e.error=null,i.is_submitted&&t(e)}function o(e){var u=null;return $.each(i.fields,function(s,i){if(i.id==e)return u=s,!1}),i.fields[u]}$("body").on("submit","#contact-form",function(s){var r;e=$(this),s.preventDefault(),i.is_submitted=!0,!function(){var e=!0;is_logged_user&&function(){var e=o("name"),u=o("email"),s=o("phone");e.input.is(":visible")||F(e);u.input.is(":visible")||F(u);s.input.is(":visible")||F(s)}();has_predefined_subject&&F(o("subject"));return $.each(i.fields,function(u,s){if(!s.is_valid)return console.log(s),e=!1,!1}),e}()?($.each(i.fields,function(e,u){t(u)}),errorToast(LANG__FIX_ERRORS),scrollToElement("#contact-form")):(r=r||LANG__SENDING_DATA,u.attr("disabled","disabled"),addPageLoading(),u.html(r+' ... <i class="fa fa-spinner fa-spin top2"></i>'),$.ajax({url:"",dataType:"json",type:"post",data:e.serialize()+"&action=submit-contact",beforeSend:function(u){u.setRequestHeader("X-CSRF-TOKEN",e.find("input[name='token']").val())},success:function(s){u.html(LANG__SEND),u.removeAttr("disabled"),removePageLoading(),s.status?(e.find(".form__content").slideUp(),e.find(".form__success_message").slideDown(),scrollToElement("#contact-form")):(errorToast(s.errors),scrollToElement("#contact-form"),grecaptcha.reset())}}))}),$("#name").on("keyup",function(){var e=$(this).val(),u=o("name");""==e||" "==e?r(u,LANG__NAME_REQUIRED):e.length<3?r(u,LANG__NAME_MIN_CHAR):F(u)}),$("#subject").on("keyup",function(){var e=$(this).val(),u=o("subject");""==e||" "==e?r(u,LANG__SUBJECT_REQUIRED):e.length<2?r(u,LANG__SUBJECT_MIN_CHAR):F(u)}),$("#message").on("keyup",function(){var e=$(this).val(),u=o("message");e.length<5?r(u,LANG__MESSAGE_MIN_CHAR):F(u)}),$("#email").on("keyup",function(){var e=$(this).val(),u=o("email");s.test(e)?F(u):r(u,JS_EMAIL_VALIDATION_ERROR)}),$("#phone").on("keyup",function(){var e=$(this).val(),u=o("phone");""==e||" "==e?r(u,LANG__PHONE_REQUIRED):F(u)})}();
