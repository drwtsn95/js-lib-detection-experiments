if(void 0===$site_url)var $site_url="";function element_type(t){return(t=$("#"+t).prop("type"))||""}function readURL(t,a){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){$("#"+a+"_preview_img").css("display","inline").slideDown("slow");var e=$("#"+a).val().split(".").pop().toLowerCase();-1==$.inArray(e,["gif","png","jpg","jpeg"])?$("#"+a+"_preview_img img").after($("#"+a).val()):$("#"+a+"_preview_img img").attr("src",t.target.result).height(33);var s=t.target.result;$("#"+a+"_preview_img .show_it").on("click",function(t){var a=$(".modal-body");$("#myModal").modal(),a.html("<img class='img-thumbnail' src='"+s+"'>")})},$("#"+a+"_preview_img a.delete_img").on("click",function(t){$("#"+a+"_preview_img").slideUp(),$("#"+a).val()}),e.readAsDataURL(t.files[0])}}function changePasswordProgressBar(t,a){a+=" #password-progress-bar";var e=t,s="0",i="progress-bar progress-bar-",r="0%",o=$(a);!0===/^(?=\S*?[A-Z])(?=\S*?[a-z])(?=\S*?[0-9])(?=\S*?[^\w\*])\S{8,}$/.test(e)?(s="100%",i+="success",r="100%"):!0===/^(?=\S*?[A-Z])(?=\S*?[a-z])((?=\S*?[0-9])|(?=\S*?[^\w\*]))\S{8,}$/.test(e)?(s="80%",i+="info",r="80%"):!0===/^(?=\S*?[a-z])(?=\S*?[0-9])\S{8,}$/.test(e)?(s="50%",i+="warning",r="50%"):!0===/(?=.{8,}).*/.test(e)?(s="30%",i+="warning",r="30%"):e.length>=1&&e.length<=7?(s="10%",i+="danger",r="10%"):e.length<1&&(s="0",i+="danger",r="0%"),o.removeClass().addClass(i),o.attr("aria-valuenow",s),o.css("width",s),o.find("#progress-bar-text").text(r)}function update_form_data(t){$("#"+t).find("input, select, textarea").each(function(){var t=$(this);t.is("[type='radio']")||t.is("[type='checkbox']")?t.prop("checked")?t.attr("checked","checked"):t.removeAttr("checked"):t.is("select")?t.find(":selected").attr("selected","selected"):t.attr("value",t.val())})}function refresh_page(){if($(".alert_toast").addClass("alert_open").fadeTo(4e3,500).slideUp(500,function(){$(this).alert("close")}),$(".alert_toast").each(function(t,a){$top=60*t+15,$(this).css("top",$top+"px")}),$('input[type="password"]:not(".no-class")').each(function(t,a){$(this);var e=$(this).attr("name"),s=$(this).attr("id"),i=$(this).val();$(this).after('<div class="input-group"><span id="spnPassword_'+s+'" class="add-on input-group-addon" style="cursor:pointer;"><i id="icnPassword" class="glyphicon glyphicon-eye-open"></i></span><input class="no-class" autocomplete="off" name="'+e+'" type="password" id="'+s+'" value="'+i+'" /></div><div class="" id="password-progress-'+e+"-"+s+'"  style="margin-top:5px"><div class="progress-bar progress-bar-danger" id="password-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0"><span class="sr-only">0% Complete (danger)</span><span id="progress-bar-text" style="color:#000;"></span></div></div>').remove(),$("#spnPassword_"+s).on("click",function(){$attr=$(this).next().attr("type"),"password"==$attr?($(this).next().attr("type","text"),$(this).find("i").attr("class","glyphicon glyphicon-eye-close")):($(this).next().attr("type","password"),$(this).find("i").attr("class","glyphicon glyphicon-eye-open"))})}),$('input[type="password"]').on("keyup change",function(){$ID=$(this).attr("id"),$name=$(this).attr("id"),changePasswordProgressBar($(this).val(),"#password-progress-"+$name+"-"+$ID)}),$("input[type='text']:not('.no-class'),input[type='password'],textarea:not('.no-class')").addClass("form-control"),$("input[type='submit'] , input[type='button'] ").addClass("btn-primary btn"),$(".map_area").each(function(t,a){$(this);var e="",s=$(this).attr("name"),i=$(this).attr("id"),r=$(this).attr("data-dir"),o=$(this).attr("data-target");"_self"==o&&(e="&controls=false",o=i+"_map_area");var n=$(this).attr("data-search-elements");if(n)for($i=0;$i<n.split(",").length;$i++)n[$i].indexOf("#")?alert($(n[$i]).val()):alert(n[$i]);var l=$(this).val(),d=$(this).val().split("||");$(this).after('<input name="'+s+'" type="hidden" id="'+i+'" value="'+l+'" /><div name="'+s+'_map_area" type="hidden" id="'+i+'_map_area" ></div><a id="'+i+'_Abutton" data-animate="false" data-target="'+o+'" href="'+r+"include/map.php?adm="+r+"&f="+i+"&elements="+n+"&ajax_page=yes"+e+'" data-element1="'+i+'"   data-target="'+o+'"  class="ajax_link" ><i class="fa fa-2x fa-map-marker"></i> <span id="'+i+'_span">'+(d[2]?d[2]:"")+"</span> </a> "+(d[2]?'<span class="delete_map_'+i+' btn btn-xs btn-danger"> <i class="fa  fa-ban"></i> </span>':"")+"</div>").remove(),e&&$("#"+i+"_Abutton").click(),$(".delete_map_"+i).on("click",function(){$("#"+i).val(""),$("#"+i+"_span").html(""),$(this).remove()})}),$(".phone_area").each(function(t,a){$(this);var e=$(this).attr("name"),s=$(this).attr("placeholder"),i=$(this).attr("id"),r=$(this).attr("maxlength"),o=$(this).attr("minlength"),n=$(this).attr("data-country-code"),l="",d=$(this).val(),c="";s||(s="000 000 000 00000"),o&&(c=c+' minlength="'+o+'" '),r&&(c=c+' maxlength="'+r+'" '),n&&(l='<div class="input-group-addon">'+n+"</div>"),$(this).after('<div class="input-group" style="direction: ltr"><div class="input-group-addon" style="border: 1px solid #ccc!important"><i class="fa fa-phone"></i></div>'+l+'<input style="text-align: left; " dir="ltr" name="'+e+'"  '+c+' id="'+i+'" value="'+d+'" type="text" class="form-control" placeholder="'+s+'" data-mask-phone /></div>').remove()}),$("[data-mask-date]").mask("0000-00-00"),$("[data-mask-time]").mask("00-00-00"),$(".timepicker").timepicker({showInputs:!1,minuteStep:1,showSeconds:!0,showMeridian:!1}),$('select:not(".no-class")').addClass("no-class").selectize({maxOptions:100,plugins:["restore_on_backspace"],plugins:["remove_button"]}),$('select:not(".no-event")').addClass("no-event").change(),$('.input-group.date:not(".no-class")').datepicker({autoclose:!0,todayBtn:"linked",clearBtn:!1,language:"ar",todayHighlight:!0,format:"yyyy-mm-dd"}),$('input[type="file"]:not(".no-class")').each(function(t,a){var e=$(this).attr("name"),s=$(this).attr("id"),i=$(this).attr("multiple");$(this).after('<span class="btn btn-default btn-file"> <span class="glyphicon glyphicon-upload"></span>  <input accept_1="image/gif, image/jpeg, image/png" onchange="readURL(this,\''+e+'\');" class="no-class" name="'+e+'" id="'+s+'"  '+i+'  type="file">  </span><div id="'+e+'_preview_img" style="display:none ;     margin: 3px " ><input name="h_'+e+'" id="h_'+e+'"  type="hidden"/><a href="#" class="show_it"><img class="img-thumbnail5"  /></a><a href="#" class="delete_img"><span class="glyphicon glyphicon-remove"></span></a></div>').remove()}),$('input:not(".no-event")').addClass("no-event").change(),$('input[type="checkbox"]:not(".no-class") , input[type="radio"]:not(".no-class")').each(function(t,a){$(this).addClass("no-class").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChecked ifUnchecked",function(t){$(this).change()})}),$("#check-all").on("ifUnchecked",function(t){$form=$(this).parents("form"),$form.find(".checkbox_del").iCheck("uncheck")}),$("#check-all").on("ifChecked",function(t){$form=$(this).parents("form"),$form.find(".checkbox_del").iCheck("check")}),$("[title]").tooltip(),$('[data-toggle="popover"]').popover({html:"true"}),$(".modal-content ").css({width:"auto",height:"auto"}),sortable(),scrolltable(),$('a[href]:not(".no_url_effect")').each(function(t,a){var e=$(this).attr("href");-1==e.indexOf("http")&&-1==e.indexOf("#")&&-1==e.indexOf("javascript:")&&$(this).attr("href",$site_url+e)}),$(".jscolor").length)if(void 0===window.ColorPickerLoad){if(void 0===window.$AdminDir);window.ColorPickerLoad=!0;var t=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src=window.$AdminDir+"./js/jscolor.min.js",t.appendChild(a)}else jscolor.installByClassName("jscolor")}function sortable(){$(".sortable-th:not(.no-class)").each(function(t,a){$(this).addClass("no-class");var e=$(this).attr("data-sort-name"),s=$(this).attr("data-search_url"),i="";$(this).attr("data-url")&&(i=$(this).attr("data-url")),$data_target=$(this).attr("data-target"),$text=$(this).text(),$(this).html('<div class="dropdown dropdown_sort text-center"> <span class=" dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> '+$text+'  </span>   <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">   <li class="text-center"><a data-loader="false" data-target="'+$data_target+'" href="'+i+"?ajax_page=true&order_by="+e+" asc"+s+'" class="ajax_link no_url_effect"><i class="fa fa-arrow-up" aria-hidden="true"></i></a></li> <li class="text-center"><a data-loader="false" data-target="'+$data_target+'" href="'+i+"?ajax_page=true&order_by="+e+" desc"+s+'" class="ajax_link no_url_effect"><i class="fa fa-arrow-down" aria-hidden="true"></i></a></li> </ul></div>')})}function scrolltable(){var t=0,a=new Array,e=$("#dataTable:not(.scrolltable)");e.find("tbody tr:first > td").each(function(t){var e=$(this).outerWidth();a.push(e),$(this).css({width:e,"max-width":e})}),e.find("th").each(function(e){$(this).css({width:a[t],"max-width":a[t]}),t++}),e.addClass("scrolltable")}$(document).on("click",".ajax_link",function(t){$(this).attr("data-preventDefault")||t.preventDefault(),$Main_this=$(this);var a="",e=$(this).attr("href")?$(this).attr("href"):$(this).attr("data-href");if(e.indexOf("http")>-1||$Main_this.hasClass("no_url_effect"))var s=e;else s=$site_url+e;var i=$(".modal-body"),r="",o=$(this).attr("title"),n=$(this).attr("data-animate"),l=$(this).attr("data-target"),d=$(this).attr("data-loader"),c=$(this).attr("data-modal"),h=$(this).attr("data-confirm"),p=$(this).attr("data-hide"),m=$(this).attr("data-method"),f=$(this).attr("data-params"),u=$(this).attr("data-params_values");if($(".modal-title").html(o),f&&u)for($params_=f.split(","),$params_values_=u.split(","),$x=0;$x<$params_.length;$x++)$params_v=$params_values_[$x].replace("***",","),a=a+$params_[$x]+"="+$params_v+"&";for($i=0;$i<=10;$i++)el=$(this).attr("data-element"+$i),el&&(a=a+el+"="+$("#"+el+("radio"==element_type(el)||"checkbox"==element_type(el)?":checked":"")).val()+"&");h?(h=h.split(","),swal(h[0],h[1],"error"),swal({title:h[0],text:"",type:"warning",showCancelButton:"true",confirmButtonColor:"#DD6B55",confirmButtonText:h[2],cancelButtonText:h[3],closeOnConfirm:!0},function(){swal("",h[1],"success"),$Main_this.removeAttr("data-confirm").click()})):(p&&$(this).parents(":eq("+p+")").hide("slow"),"module_open"!=l&&l?r=$("#"+l):(l="",r=i,$("#myModal").modal("show")),"false"!=d&&r.fadeTo("fast",.2,function(){}).append('<svg class="ajax_link_loader circle-loader " width="40" height="40" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="15"></svg>'),$.ajax({type:m||"GET",data:a,url:s+(s.indexOf("?")>-1?"&":"?")+"target_p="+(l||""),success:function(t){l?($("#"+l).html(t),n||$("html, body").animate({scrollTop:$("#"+l).offset().top-70},"slow")):i.html(t),"hide"==c&&$("#myModal").modal("hide"),r.fadeTo("fast",1,function(){}),$(".ajax_link_loader").remove(),refresh_page()}}))}),$(document).on("click",".valid_form",function(t){$this=$(this),$confirm=$this.attr("data-valid-message"),$confirm&&($confirm=$confirm.split(","),swal($confirm[0],$confirm[1],"error"),swal({title:$confirm[0],text:"",type:"warning",showCancelButton:"true",confirmButtonColor:"#DD6B55",confirmButtonText:$confirm[1],cancelButtonText:$confirm[2],closeOnConfirm:!0},function(){$this.removeClass("valid_form").click()})),t.preventDefault()}),$(document).on("submit",".ajax_form",function(t){var a=$(".modal-body"),e=$(this).attr("action");if(e.indexOf("http")>-1||$(this).hasClass("no_url_effect"))var s=e;else s=$site_url+e;var i=$(this).serialize(),r=$(this).attr("data-title"),o=$(this).attr("data-animate"),n=$(this).attr("data-load"),l=$(this).attr("target"),d=$(this).attr("method"),c=$(this).attr("data-modal");$(".modal-title").html(r);var h=0,p=0,m=0,f=new FormData(this);$.ajax({type:d,data:"post"==d||"POST"==d?f:i,processData:!1,contentType:!1,dataType:"JSON",url:s+(s.indexOf("?")>-1?"&":"?")+"target_p="+(l||""),xhr:function(){n||$("body").before('<div class="loader_"><div class="progress" data-toggle="tooltip" data-placement="top" title="" data-original-title="Your progress"><div class="clip-1"><div class="slice-1" style="-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);"></div></div><div class="clip-2"><div class="slice-2" style="-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);"></div></div><div class="label">0%</div></div></div>');var t=$.ajaxSettings.xhr();return t.upload.onprogress=function(t){n||((m=parseInt(t.loaded/t.total*100))<=50?h=m/50*180:(h=180,p=(m-50)/50*180),$(".loader_ .slice-1").css({transform:"rotate("+h+"deg)"}),$(".loader_ .slice-2").css({transform:"rotate("+p+"deg)"}),$(".loader_ .label").html(m+"%"))},t},complete:function(t,e){var s=t.responseText;"module_open"==l&&(l=""),l?($("#"+l).html(s),$(".loader_").remove(),o||$("html, body").animate({scrollTop:$("#"+l).offset().top-70},"slow")):($("#myModal").modal(),a.html(s)),"hide"==c&&$("#myModal").modal("hide"),refresh_page()},error:function(t,a,e){$(".loader_").remove()}}),t.preventDefault()}),$(document).on("click","[data-do]",function(){$this=$(this),$MyDo=$this.attr("data-do"),$MyTarget=$this.attr("data-target"),$MyHref=$this.attr("data-href"),$form=$this.parents("form"),$do=$form.find("#do"),$MyTarget&&$form.attr("target",$MyTarget),$MyHref&&$form.attr("action",$MyHref),$do.val($MyDo),$form.submit()}),$("#modal_state").on("click",function(){$("#myModal").modal("show"),$(this).addClass("hidden")}),$("#myModal").on("hidden.bs.modal",function(){$(document).find("#modal_state").removeClass("hidden").slideDown("fast")}),$(document).on("click","#search-toggle",function(t){t.preventDefault(),document.getElementById("search_area").style.width="280px"}),$(document).on("click","#search-toggle-close",function(t){t.preventDefault(),document.getElementById("search_area").style.width="0"}),$(document).on("click","[modal_open]",function(){var t=$(this).attr("modal_open");if($(this).attr("modal-close")){update_form_data("_"+t);var a=$("#_"+t).html();$("#"+t).html(a),$("#myModal").modal("hide"),$("#_"+t).remove()}else{update_form_data(t);a=$("#"+t).html();$("#myModal").modal(),$(".modal-body").html('<div id="_'+t+'">'+a+'</div><div class="text-center"><button modal-close="true" modal_open="'+t+'" class="btn btn-primary"><i class="fa fa-floppy-o"></i></button></div>')}}),$(document).on("change keyup   ","[data-change-values]",function(){$val=$(this).val(),$data_change_values=$(this).attr("data-change-values").split(",");var t=!1;if(($(this).is("[type='radio']")||$(this).is("[type='checkbox']"))&&!$(this).prop("checked"))t=!0;if(!t)for($i=0;$i<$data_change_values.length;$i++)$test=$data_change_values[$i],$test==$val&&($data_change_hide=$(this).attr("data-change-hide-"+$test),$data_change_show=$(this).attr("data-change-show-"+$test),$data_change_hide&&$($data_change_hide).fadeOut("slow").removeClass("hidden"),$data_change_show&&$($data_change_show).fadeIn("slow"))}),$(document).on("hidden.bs.modal","#myModal",function(){$(this).find(".modal-body").html("")}),$(document).on("click",".ajax_active",function(t){"yes"==$(this).attr("data-state")?($(this).attr("data-state","no"),$(this).find("span").attr("class","").addClass("glyphicon glyphicon-ok-circle"),$(this).find("button").attr("class","").addClass("btn btn-success")):($(this).attr("data-state","yes"),$(this).find("span").attr("class","").addClass("glyphicon glyphicon-ban-circle"),$(this).find("button").attr("class","").addClass("btn btn-danger"))}),$(function(){"use strict";$(".modal-content").draggable({handle:".modal-header"});var t=window.history.location||window.location;$(window).on("popstate",function(a){var e=(e=t.href).split("target_p="),s=e[0].replace("ajax_page_","ajax_page")+"history_link=yes",i=e[1];$("body").after('<a id="history_button" data-modal="'+(i?"hide":"")+'" data-target="'+i+'" href="'+s+'" class="ajax_link"></a>'),$("#history_button").click()}),$(".fa-star, .fa-star-o, .glyphicon-star, .glyphicon-star-empty").click(function(t){t.preventDefault();var a=$(this).hasClass("glyphicon"),e=$(this).hasClass("fa");a&&($(this).toggleClass("glyphicon-star"),$(this).toggleClass("glyphicon-star-empty")),e&&($(this).toggleClass("fa-star"),$(this).toggleClass("fa-star-o"))})}),$(document).on("keyup","[data-search-url]",function(t){$data_search_url=$(this).attr("data-search-url"),$data_search_key=$(this).attr("data-search-key"),$data_select_name=$(this).attr("data-select-name");var a=$("#"+$data_select_name)[0].selectize;$search_word=$(this).val(),$.ajax({type:"GET",url:$data_search_url,data:$data_search_key+"="+$search_word,dataType:"json",success:function(t){a.clear(),a.clearOptions(),$.each(t,function(t,e){a.addOption({text:e.name,value:e.ID})})}}),a.refreshOptions()}),$(function(){refresh_page()});